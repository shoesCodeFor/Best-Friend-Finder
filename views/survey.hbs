<div class="text-center main-content">

    <h2><b>Fill out our survey to find out what kind of dog suits you best!</b></h2>
    <form id="survey">
        <div class="container">
            <!-- habitatSize -->
            <div class="form-group">
                <label class="sliderLabel" for="habitatSize">How big is the living space your dog will have?<br> <span id="habitatVal">(ex: A small house)</span></label>
                <input type="range" max="100" min="1" value="50" class="form-control-range" id="habitatSize" name="habitatSize">
            </div>
            <!-- energy -->
            <div class="form-group">
                <label class="sliderLabel" for="energy">How much energy are expecting your new pet to have?<br> <span id="energyVal">(ex: 50 minutes of okay a day)</span></label>
                <input type="range" max="100" min="1" value="50" class="form-control-range" id="energy" name="energy">
            </div>
            <!-- independence -->
            <div class="form-group">
                <label class="sliderLabel" for="independence">How many hours a day will your pet be home alone?<br> <span id="independenceVal">(ex - 4.5 hours a day)</span></label>
                <input type="range" max="100" min="1" value="50" class="form-control-range" id="independence" name="independence">
            </div>
            <!-- trainability -->
            <div class="form-group">
                <label class="sliderLabel" for="trainability">How trainable would you like your pet to be?<br> <span id="trainabilityVal">(ie - I want my dog to learn some tricks)</span></label>
                <input type="range" max="100" min="1" value="50" class="form-control-range" id="trainability" name="trainability">
            </div>
            <!-- kids -->
            <div class="form-group">
                <label class="sliderLabel" for="kids">Will your dog be playing wit kids?<br> <span id="kidsVal">(ex: The dog will play with kids sometimes)</span></label>
                <input type="range" max="100" min="1" value="50" class="form-control-range" id="kids" name="kids">
            </div>
            <!-- otherDogs -->
            <div class="form-group">
                <label class="sliderLabel" for="otherDogs">Will your dog be playing with other dogs?<br> <span id="otherDogsVal">(ex: Yes, we have one dog)</span></label>
                <input type="range" max="100" min="1" value="50" class="form-control-range" id="otherDogs" name="otherDogs">
            </div>
            <!-- temperment -->
            <div class="form-group">
                <label class="sliderLabel" for="temperment">How friendly do you want your pet to be?<br> <span id="tempermentVal">(ex: Very nice)</span></label>
                <input type="range" max="100" min="1" value="50" class="form-control-range" id="temperment" name="temperment">
            </div>
            <!-- loyalty -->
            <div class="form-group">
                <label class="sliderLabel" for="loyalty">How loyal (protective) would you like your dog to be?<br> <span id="loyaltyVal">(ie - less than 30 mins)</span></label>
                <input type="range" max="100" min="1" value="50" class="form-control-range" id="loyalty" name="loyalty">
            </div>    
            <!-- size: -->
            <div class="form-group">
                <label class="sliderLabel" for="size">How big of a dog are you looking for?<br> <span id="sizeVal">(ex: medium, like an English Bulldog)</span></label>
                <input type="range" max="100" min="1" value="50" class="form-control-range" id="size" name="size">
            </div>
            <!-- longevity -->
            <div class="form-group">
                <label class="sliderLabel" for="longevity">How many years do you expect your dog to live for?<br> <span id="longevityVal">6-8 years</span></label>
                <input type="range" max="100" min="1" value="50" class="form-control-range" id="longevity" name="longevity">
            </div>
            <!-- climate -->
            <div class="form-group">
                <label class="sliderLabel" for="climate">What kind of weather climate to you live in?<br> <span id="climateVal">(ex: 60 degrees F year round)</span></label>
                <input type="range" max="100" min="1" value="50" class="form-control-range" id="climate" name="climate">
            </div>
            
        </div>
        <button id="formSubmission" type="submit" class="btn btn-lg btn-info">
            <i class="fab fa-wpforms"></i> Submit
        </button>
    </form>

    
    <script>
        $.fn.serializeObject = function() {
        var o = {};
        var a = this.serializeArray();
            $.each(a, function() {
                if (o[this.name]) {
                    if (!o[this.name].push) {
                        o[this.name] = [o[this.name]];
                    }
                    o[this.name].push(this.value/10 || '');
                } else {
                    o[this.name] = this.value/10 || '';
                }
            });
            return o;
        };

        $('#habitatSize').on("change", function (){
            console.log($(this).val());
            let sz = $(this).val();
            if(sz >= 91 && sz <= 100){
                $('#habitatVal').text(`A large house/farm with land`);
            }
            else if(sz >= 61 && sz < 90){
                $('#habitatVal').text(`A large house 1${sz-10}0 - 2${sz-10}0 sq ft with a yard`);
            }
            else if(sz >= 41 && sz < 60){
                $('#habitatVal').text(`A house < 1${sz-10}0 sq ft`);
            }
            else if(sz >= 20 && sz < 40){
                $('#habitatVal').text(`Townhome < 1${sz-10}0 sq ft`);
            }
            else if(sz >= 10 && sz < 20){
                $('#habitatVal').text(`Small Apartment < ${sz*70} sq ft`);
            }
            else{
                $('#habitatVal').text(`Studio Apartment`);
            } 
        });
        $('#energy').on("change", function (){
            console.log($(this).val());
            let e = $(this).val();
            if(e > 90){
                $('#energyVal').text(`Endless energy`);
            }
            else if(e >= 10 && e < 90){
                $('#energyVal').text(`${e} minutes of play per day`);
            }
            else{
                $('#energyVal').text(`I want a lazy dog`);
            } 
        });
        $('#independence').on("change", function (){
            console.log($(this).val());
            let i = $(this).val();
            if(i >= 85 && i <= 100){
                $('#independenceVal').text(`Home alone more than 8 hrs a day (not recommended)`);
            }
            else if(i >= 11 && i < 85){
                $('#independenceVal').text(`Home alone ${((i/10)*.94).toFixed(1)} hrs a day`);
            }
            else{
                $('#independenceVal').text(`The dog will be with you all the time`);
            } 
        });
        $('#trainability').on("change", function (){
            console.log($(this).val());
            let skillz = $(this).val();
            if(skillz > 80){
                $('#trainabilityVal').text(`I want a genius dog!`);
            }
            else if(skillz > 40 && skillz < 79)
            {
                $('#trainabilityVal').text(`I want to teach my dog a few tricks`);
            }
            else if(skillz > 10 && skillz < 41)
            {
                $('#trainabilityVal').text(`I want to teach my dog to sit and shake`);
            }
            else
            {
                $('#trainabilityVal').text(`I don't care if they're not so bright.`);
            } 
        });
        $('#kids').on("change", function (){
            console.log($(this).val());
            let kiddos = $(this).val();
            if(kiddos > 80){
                $('#kidsVal').text(`I want my kids to be able to play rough with our dog.`);
            }
            else if(skillz > 50 && skillz < 81)
            {
                $('#kidsVal').text(`I want the dog to be comfortable around kids.`);
            }
            else if(skillz > 30 && skillz < 51)
            {
                $('#kidsVal').text(`I want my dog to tolerate kids.`);
            }
            else
            {
                $('#kidsVal').text(`My dog will not be around children.`);
            } 
        });
        $('#otherDogs').on("change", function (){
            console.log($(this).val());
            let dogs = $(this).val();
            if(dogs > 85){
                $('#otherDogsVal').text(`I want my dog to be able to play with any dog.`);
            }
            else if(dogs > 60 && dogs < 85)
            {
                $('#otherDogsVal').text(`I want my dog to get along with well-behaved dogs.`);
            }
            else if(dogs > 50 && dogs < 61)
            {
                $('#otherDogsVal').text(`I want my dog to get along with the dogs in our household.`);
            }
            else if(dogs > 30 && dogs < 51)
            {
                $('#otherDogsVal').text(`My dog will rarely be around other dogs.`);
            }
            else if(dogs > 15 && dogs < 31)
            {
                $('#otherDogsVal').text(`My dog will not be around other dogs`);
            }
            else
            {
                $('#otherDogsVal').text(`I can handle a dog that is dog-aggressive.`);
            } 
        });
        $('#temperment').on("change", function (){
            console.log($(this).val());
            let temper = $(this).val();
            if(temper > 80){
                $('#tempermentVal').text(`My dog is happy all the time!`);
            }
            else if(temper > 50 && temper < 79)
            {
                $('#tempermentVal').text(`My dog is happy most of the time`);
            }
            else if(temper > 30 && temper < 51)
            {
                $('#tempermentVal').text(`My dog is oblivious`);
            }
            else
            {
                $('#tempermentVal').text(`My doesn't care about anything`);
            } 
        });
        $('#loyalty').on("change", function (){
            console.log($(this).val());
            let loyal = $(this).val();
            if(loyal > 85){
                $('#loyaltyVal').text(`My dog is only likes me!`);
            }
            else if(loyal > 50 && loyal < 85)
            {
                $('#loyaltyVal').text(`I want my dog to love me and those who are close to me`);
            }
            else if(loyal > 30 && loyal < 51)
            {
                $('#loyaltyVal').text(`I want my dog to get along with the dogs in our household.`);
            }
            else if(loyal > 10 && loyal < 31)
            {
                $('#loyaltyVal').text(`I want my dog to bark at strangers.`);
            }
            else
            {
                $('#loyaltyVal').text(`My dog wouldn't protect me from a burglar.`);
            } 
        });
        $('#size').on("change", function (){
            console.log($(this).val());
            let sz = $(this).val();
            if(sz >= 95 && sz <= 100){
                $('#sizeVal').text(`A large dog (more than 140 lbs)`);
            }
            else if(sz >= 10 && sz < 95){
                $('#sizeVal').text(`~ ${sz*0.9} lbs - ${sz*1.2} lbs`);
            }
            else{
                $('#sizeVal').text(`Only tiny dogs for you (less than 10 lbs)`);
            } 
        });
        $('#longevity').on("change", function (){
            console.log($(this).val());
            let lng = $(this).val();
            if(lng >= 90 && lng <= 100){
                $('#longevityVal').text(`You want a dog that will live more than 12 years`);
            }
            else if(lng >= 10 && lng < 90){
                $('#longevityVal').text(`~ ${Number.parseInt(lng*0.11)} year - ${Number.parseInt(lng*.14)} years`);
            }
            else{
                $('#longevityVal').text(`Age is only a number.`);
            } 
        });
        $("#formSubmission").on('click', function (e){
            event.preventDefault();
            let userForm = $('#survey').serializeObject();
            console.log(userForm);
            // $.post('/survey', userForm, function (){
                // console.log(data);
                // $(location).attr('href', data);
                // console.log(status);
                // console.log("Thanks for the post!");
            // });
            $.ajax({
                method: "POST",
                url: "/survey",
                data: userForm
            })
            .then(function( data ) {
                $(location).attr('href', data);
            });
        });
           
    </script>
</div>